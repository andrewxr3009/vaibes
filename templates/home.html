<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vaibes - Home</title>
    
    <!-- Meta tags para web app -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Ícones para iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="static/vibe-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/vibe-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/vibe-icon.png">

    <!-- Manifest do Web App -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Meta tags para Android -->
    <meta name="theme-color" content="#022247">
    <link rel="icon" sizes="192x192" href="/static/vibe-icon.png">
    <link rel="icon" sizes="512x512" href="/static/vibe-icon.png">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-X2PT21PM9Y"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-X2PT21PM9Y');
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3814244836764328" crossorigin="anonymous"></script>
<style>

    /* Estiliza o formulário */
    form#postForm {
        width: 90%;                   /* Faz o formulário ocupar 100% da largura disponível */
        max-width: 500px;               /* Limita a largura máxima a 500px */
        margin: 0 auto;                 /* Centraliza o formulário horizontalmente */
        padding: 20px;                  /* Espaçamento interno */
        background-color: #fff;         /* Cor de fundo branco */
        border-radius: 10px;            /* Bordas arredondadas */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);  /* Sombra leve ao redor do formulário */
    }

    /* Estiliza o campo textarea */
    textarea {
        width: 100%;                    /* O textarea ocupa 100% da largura do formulário */
        padding: 15px;                  /* Espaçamento interno */
        border: 1px solid #ddd;         /* Borda cinza clara */
        border-radius: 30px;            /* Bordas arredondadas */
        font-size: 16px;                /* Tamanho da fonte */
        outline: none;                  /* Remove o contorno ao focar */
        box-sizing: border-box;         /* Garante que o padding não aumente o tamanho total */
        margin-bottom: 10px;            /* Espaçamento inferior */
        resize: none;                   /* Remove a opção de redimensionar o textarea */
        height: 150px;                  /* Define uma altura padrão */
    }

    /* Estiliza o botão de envio */
    button[type="submit"] {
        width: 100%;                    /* O botão ocupa 100% da largura do formulário */
        padding: 15px;                  /* Espaçamento interno */
        background-color: #022247;      /* Cor de fundo azul */
        color: white;                   /* Cor do texto */
        border: none;                   /* Remove a borda padrão */
        border-radius: 30px;            /* Bordas arredondadas */
        font-size: 16px;                /* Tamanho da fonte */
        cursor: pointer;                /* Muda o cursor ao passar o mouse */
        transition: background-color 0.3s ease; /* Transição suave da cor de fundo */
    }

    button[type="submit"]:hover {
        background-color: #0056b3;      /* Cor de fundo ao passar o mouse */
    }

    /* Estiliza o campo de busca de GIF */
    input[type="text"] {
        width: 100%;                    /* O campo de texto ocupa 100% da largura */
        padding: 15px;                  /* Espaçamento interno */
        border: 1px solid #ddd;         /* Borda cinza clara */
        border-radius: 30px;            /* Bordas arredondadas */
        font-size: 16px;                /* Tamanho da fonte */
        outline: none;                  /* Remove o contorno ao focar */
        box-sizing: border-box;         /* Garante que o padding não aumente o tamanho total */
        margin-bottom: 10px;            /* Espaçamento inferior */
    }

    /* Estiliza o container de GIFs */
    .gif-container {
        display: flex;
        flex-wrap: wrap;                /* Os GIFs ficam em várias linhas, se necessário */
        gap: 10px;                      /* Espaço entre os GIFs */
        margin-top: 10px;
    }

    .gif-item {
        width: 250px;                   /* Largura padrão para os GIFs */
        height: auto;                   /* Altura proporcional */
        border-radius: 10px;            /* Bordas arredondadas nos GIFs */
        cursor: pointer;                /* Muda o cursor ao passar sobre o GIF */
        transition: transform 0.2s ease; /* Transição suave de efeito */
    }
    .photo-item {
        width: 250px;                   /* Largura padrão para os GIFs */
        height: auto;                   /* Altura proporcional */
        border-radius: 10px;            /* Bordas arredondadas nos GIFs */
        cursor: pointer;                /* Muda o cursor ao passar sobre o GIF */
        transition: transform 0.2s ease; /* Transição suave de efeito */
    }

    .gif-item:hover {
        transform: scale(1.1);          /* Aumenta o GIF ao passar o mouse */
    }


    body {
        font-family: Arial, sans-serif;
        background-color: #bfbfbf;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }
    
    .app-container {
        display: flex;
        flex-direction: column;
        height: 100vh;
    }
    
    .posts-container {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
        display: flex;
        flex-direction: column;
    }
    
    .post {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 10px;
        padding: 10px;
        cursor: pointer;
        position: relative;
    }
    
    .post-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .post-info-left {
        display: flex;
        align-items: center;
    }
    
    .profile-pic {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
    }
    
    .post-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .post-info a {
        font-size: 16px;
        font-weight: bold;
        color: #022247;
        text-decoration: none;
    }
    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3); /* Cor de fundo */
        border-top: 4px solid white; /* Cor do topo */
        border-radius: 50%;
        width: 20px; /* Tamanho do spinner */
        height: 20px; /* Tamanho do spinner */
        animation: spin 1s linear infinite;
        margin-top: 10px; /* Espaço acima do spinner */
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    
    .follow-form {
        margin-left: 5px; /* Para manter o botão próximo ao nome do autor */
        }
    .follow-button {
        background-color: #022247;
        color: white;
        border: none;
        padding: 3px 10px; /* Diminuído */
        border-radius: 15px; /* Diminuído */
        cursor: pointer;
    }
    
    .follow-button.following {
        background-color: transparent;
        color: #022247;
        border: 1px solid #022247;
    }
    
    .follow-button:hover {
        background-color: #0056b3;
    }



    
    .post-body {
        margin-top: 10px;
        font-size: 14px;
        line-height: 1.6;
        color: #333;
        cursor: pointer;
    }
    
    .post-body a {
        color: #0056b3;
        text-decoration: none;
    }
    
    .post-body a:hover {
        text-decoration: underline;
    }
    
    

    
    .post-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
    }
    
    .like-button {
        background-color: #022247;
        color: white;
        border: none;
        padding: 5px 15px;
        border-radius: 20px;
        cursor: pointer;
    }
    
    .share-button {
        background-color: #022247;
        color: white;
        border: none;
        padding: 5px 15px;
        border-radius: 20px;
        cursor: pointer;
    }
    
    .like-button:hover {
        background-color: #0056b3;
    }
    
    .like-container {
        display: flex;
        align-items: center;
    }
    
    .like-container span {
        margin-left: 5px;
    }
    
    .post-options {
        font-size: 24px;
        cursor: pointer;
        color: #777;
        margin-left: 10px; /* Para garantir que não fique em cima do botão de compartilhar */
    }
    
    .post-options-menu {
        display: none;
        position: absolute;
        right: 10px;
        bottom: 50px;
        background-color: white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        z-index: 100;
    }
    
    .post-options-menu.active {
        display: block;
    }
    
    .post-options-menu button {
        background-color: transparent;
        border: none;
        width: 100%;
        text-align: left;
        padding: 10px 0;
        cursor: pointer;
        color: #333;
    }
    
    .post-options-menu button:hover {
        background-color: #f0f0f0;
    }
    
    .bottom-bar {
        position: fixed;
        bottom: 0;
        width: 100%;
        background-color: #fff;
        display: flex;
        justify-content: space-around;
        box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
        height: 50px;
    }
    
    .bottom-bar img {
        width: 24px;
        height: 24px;
    }
    
    .filter-bar {
        display: flex;
        justify-content: center;
        background-color: #fff;
        padding: 10px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .filter-button {
        background-color: #022247;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 0 10px;
        border-radius: 20px;
        cursor: pointer;
    }
    
    .filter-button.active {
        background-color: #0056b3;
    }
    
    .post-info-right {
        font-size: 12px;
        color: #777;
        margin-left: auto;
    }
    
    .post-date {
        font-style: italic;
    }
    .bottom-bar-modal {
        display: none; /* O modal começa oculto */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7); /* Fundo escuro com transparência */
        justify-content: center;
        align-items: center;
        z-index: 1000; /* Coloca o modal acima de outros elementos */
    }

    .bottom-bar-modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        width: 90%;
        max-width: 500px;
    }
    /* Estilização dos botões no modal */
    .modal-button {
        background-color: #022247; /* Cor do botão */
        color: white; /* Texto branco */
        border: none; /* Sem borda */
        padding: 10px 20px; /* Padding interno */
        border-radius: 25px; /* Bordas arredondadas */
        cursor: pointer; /* Cursor em forma de mão */
        transition: background-color 0.3s, transform 0.3s; /* Transição suave */
        margin: 5px; /* Margem entre botões */
    }
    
    .modal-button:hover {
        background-color: #0056b3; /* Cor ao passar o mouse */
        transform: scale(1.05); /* Leve aumento ao passar o mouse */
    }
    
    .modal-button:active {
        transform: scale(0.95); /* Efeito de pressão no botão */
    }
    .bottom-bar-link {
        display: flex;                 /* Usando flexbox para alinhar verticalmente */
        flex-direction: column;        /* Coloca os elementos em coluna (imagem em cima, texto embaixo) */
        align-items: center;           /* Centraliza os itens horizontalmente */
        text-decoration: none;         /* Remove o sublinhado */
        color: black;                  /* Cor do texto, troque por uma cor desejada */
    }

    .bottom-bar-link img {
        width: 24px;                  /* Tamanho dos ícones ajustado */
        height: 24px;
    }

    .bottom-bar-link span {
        font-size: 12px;              /* Tamanho da fonte do texto abaixo da imagem */
        color: #333;                  /* Cor do texto, pode ser ajustada conforme necessário */
        margin-top: 4px;              /* Espaçamento entre a imagem e o texto */
    }

    .create-post-button {
        display: flex;                 /* Usando flexbox para o botão de criar */
        flex-direction: column;
        align-items: center;
        cursor: pointer;               /* Muda o cursor para indicar interatividade */
        position: relative;            /* Permite o posicionamento absoluto do ícone */
        margin-top: -20px;            /* Ajusta a posição do botão para cima */
        z-index: 10;                   /* Coloca o botão acima da barra */
    }

    .create-post-button img {
        width: 40px;                  /* Aumenta o tamanho do ícone de criar */
        height: 40px;
    }

    .create-post-button span {
        font-size: 12px;              /* Tamanho da fonte do texto abaixo da imagem */
        color: #333;                  /* Cor do texto do botão de criar */
        margin-top: 4px;              /* Espaçamento entre a imagem e o texto */
    }

    .create-post-button:hover img {
        transform: scale(1.1);        /* Aumenta o ícone ao passar o mouse */
        transition: transform 0.2s;    /* Transição suave para o efeito */
    }

    .create-post-button span {
        font-size: 12px;              /* Tamanho da fonte do texto abaixo da imagem */
        color: #333;                  /* Cor do texto do botão de criar */
        margin-top: 4px;              /* Espaçamento entre a imagem e o texto */
    }

        
    
     
     </style>

</head>
<body>
    <div class="app-container">
        <!-- Filtro para ordenação dos posts -->
        <div class="filter-bar">
            <button class="filter-button active" id="for-you" onclick="setPostFilter('relevance')">For You</button>
            <button class="filter-button" id="legacy" onclick="setPostFilter('chronological')">Legacy</button>
        </div>
    
        <div class="posts-container">
            {% if posts %}
                {% for post in posts %}
                <div class="post" id="post-{{ post.id }}">
                    <div class="post-header">
                        <div class="post-info-left">
                            <img src="{{ post.user.profile_picture or url_for('static', filename='uploads/default-profile-pic.png') }}" alt="Foto de perfil" class="profile-pic">
                            <div class="post-info">
                                <a href="{{ url_for('profile', username=post.user.username) }}">
                                    <strong>{{ post.user.username }}</strong>
                                </a>
                                <form id="follow-form-{{ post.user.id }}" action="{{ url_for('toggle_follow', username=post.user.username) }}" method="POST" class="follow-form">
                                    {% if user.is_following(post.user) %}
                                        <butypetton  class="follow-button following">Deixar de Seguir</button>
                                    {% else %}
                                        <button  class="follow-button">Seguir</button>
                                    {% endif %}
                                </form>
                            </div>
                        </div>
                        <div class="post-info-right">
                            <span class="post-date" data-timestamp="{{ post.timestamp.isoformat() }}">
                                {{ post.timestamp.strftime('%d de %B de %Y') }}
                            </span>
                        </div>
                        
                    </div>
        
                    <div class="post-body" onclick="redirectToPost({{ post.id }})">
                        {% set content = post.content %}
                        {% for word in content.split() %}
                            {% if word.startswith('#') %}
                                <a href="/hashtag/{{ word[1:] }}">{{ word }}</a>
                            {% else %}
                                {{ word }}
                            {% endif %}
                        {% endfor %}
                        {% if post.gif_url %}
                            <div class="gif-container">
                                <img src="{{ post.gif_url }}" alt="GIF" class="gif-item">
                            </div>
                        {% endif %}
                        {% if post.img_url %}
                            <div class="photo-container">
                                <img src="{{ post.img_url }}" alt="Foto" class="photo-item">
                            </div>
                        {% endif %}
                    </div>
        
                    <div class="post-footer">
                        <div class="like-container">
                            <button class="like-button" id="like-button-{{ post.id }}" onclick="likePost({{ post.id }})">
                                Curtir <span id="like-count-{{ post.id }}">{{ post.likes|length }}</span>
                            </button>
                        </div>
                        <div class="share-container">
                            <button class="share-button" id="share-button-{{ post.id }}" onclick="sharePost({{ post.id }})">
                                Compartilhar
                            </button>
                        </div>
                        <div class="post-options" onclick="toggleOptions({{ post.id }})">•••</div>
                    </div>
        
                    <div class="post-options-menu" id="options-menu-{{ post.id }}">
                        {% if session['user_id'] == post.user.id %}
                            <button onclick="deletePost({{ post.id }})">Excluir</button>
                            <button onclick="viewInsights({{ post.id }})">Ver Insights</button>
                        {% else %}
                            <button>Denunciar</button>
                            <button>Silenciar</button>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p>Nenhum post encontrado.</p>
            {% endif %}
        </div>
        
    
        <div class="bottom-bar">
            <a href="{{ url_for('home') }}" class="bottom-bar-link">
                <img src="{{ url_for('static', filename='home-icon.png') }}" alt="Home">
                <span>Início</span>
            </a>
            <a href="{{ url_for('notifications') }}" class="bottom-bar-link">
                <img src="{{ url_for('static', filename='notifications-icon.png') }}" alt="Notificações">
                <span>Notificações</span>
            </a>
            <div class="create-post-button" onclick="openModal()">
                <img src="{{ url_for('static', filename='post-icon.png') }}" alt="Criar Post">
                <span>Criar</span>
            </div>
            <a href="{{ url_for('profile', username=user.username) }}" class="bottom-bar-link">
                <img src="{{ user.profile_picture or url_for('static', filename='uploads/default-profile-pic.png') }}" alt="Foto de perfil" class="profile-pic">
                <span>Perfil</span>
            </a>
            <a href="{{ url_for('search') }}" class="bottom-bar-link">
                <img src="{{ url_for('static', filename='search-icon.png') }}" alt="Pesquisar">
                <span>Buscar</span>
            </a>
        </div>
    
        <div id="bottom-bar-modal" class="bottom-bar-modal">
            <div class="bottom-bar-modal-content">
                <button type="button" class="modal-button" onclick="closeModal()">Fechar</button>
                <form id="postForm" action="{{ url_for('create_post') }}" method="POST" enctype="multipart/form-data" onsubmit="showSpinner()">
                    <textarea name="content" placeholder="O que você está pensando?" required></textarea>
                    <input type="text" id="gif-search" placeholder="Buscar GIFs" oninput="searchGifs()">
                    <div id="gif-results" class="gif-container"></div>
                    <input type="hidden" id="gif-url" name="gif_url">
                    <input type="file" name="image" id="photo-upload" accept="image/*" style="display: none;">
                    <label for="photo-upload" class="modal-button">Selecionar Foto</label>
                    <button type="submit" class="modal-button">Postar</button>
                    <div id="spinner" class="spinner" style="display: none;"></div>
                </form>
            </div>
        </div>
        
    

    <script>
        // Função para alternar o menu de opções do post
        function toggleOptions(postId) {
        document.getElementById(`options-menu-${postId}`).classList.toggle('active');
    }

function setPostFilter(filterType) {
    // Remove a classe 'active' de ambos os botões
    document.getElementById('for-you').classList.remove('active');
    document.getElementById('legacy').classList.remove('active');
    
    // Adiciona a classe 'active' ao botão correspondente
    if (filterType === 'relevance') {
        document.getElementById('for-you').classList.add('active');
    } else if (filterType === 'chronological') {
        document.getElementById('legacy').classList.add('active');
    }
    
    // Redireciona a página com o filtro aplicado
    window.location.href = `/?filter=${filterType}`;
}



        function likePost(postId) {
            fetch(`/like_post/${postId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.getElementById(`like-count-${postId}`).innerText = data.like_count;
                    const likeButton = document.getElementById(`like-button-${postId}`);
                    likeButton.classList.toggle('liked');
                } else {
                    alert(data.message);
                }
            })
            .catch(error => {
                alert('Erro ao curtir o post: ' + error);
            });
        }

        function openModal() {
            document.getElementById('bottom-bar-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('bottom-bar-modal').style.display = 'none';
        }

        

        function searchGifs() {
            const query = document.getElementById('gif-search').value;
            const gifResults = document.getElementById('gif-results');
            gifResults.innerHTML = '';

            if (query.length > 0) {
                fetch(`https://api.giphy.com/v1/gifs/search?api_key=URqPC2QH6fsA2xCx7ySJTbholry57xjy&q=${query}&limit=5`)
                    .then(response => response.json())
                    .then(data => {
                        data.data.forEach(gif => {
                            const img = document.createElement('img');
                            img.src = gif.images.fixed_height_small.url;
                            img.classList.add('gif-item');
                            img.onclick = () => selectGif(gif.images.fixed_height_small.url);
                            gifResults.appendChild(img);
                        });
                    })
                    .catch(error => console.error('Erro ao buscar GIFs:', error));
            }
        }

        function selectGif(gifUrl) {
            document.getElementById('gif-url').value = gifUrl;
            closeModal();
        }


    function showSpinner() {
    document.getElementById('spinner').style.display = 'block'; // Exibe o spinner
}




    document.getElementById('postForm').addEventListener('submit', function(event) {
            const content = document.querySelector('textarea[name="content"]').value;
            const hashtags = content.match(/#\w+/g) || []; // Captura hashtags ou um array vazio
            document.getElementById('hashtag-input').value = hashtags.join(','); // Armazena hashtags no campo oculto
        });

    function viewInsights(postId) {
            window.location.href = `/insights/${postId}`;
        }
    
    function deletePost(postId) {
        if (confirm('Tem certeza que deseja excluir este post?')) {
            fetch(`/delete_post/${postId}`, { method: 'DELETE' })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById(`post-${postId}`).remove();
                        alert('Post excluído com sucesso!');
                    } else {
                        alert('Erro ao excluir o post.');
                    }
                });
        }
    }
    function toggleFollow(username) {
    fetch(`/follow_user/${username}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
              // Se estiver usando CSRF
        },
        credentials: 'same-origin'
    })
    .then(response => response.json())
    .then(data => {
        if (data.following) {
            document.getElementById('follow-btn').innerText = 'Seguindo';
            document.getElementById('follow-btn').style.backgroundColor = 'transparent';
            document.getElementById('follow-btn').style.borderColor = '#022247';
        } else {
            document.getElementById('follow-btn').innerText = 'Seguir';
            document.getElementById('follow-btn').style.backgroundColor = '#022247';
        }
    })
    .catch(error => console.error('Error:', error));
}

            // Função para seguir/deixar de seguir
            document.querySelectorAll('form[id^="follow-form-"]').forEach(form => {
                form.onsubmit = function(event) {
                    event.preventDefault(); // Impede o envio do formulário
                    const form = this;
                    fetch(form.action, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }).then(response => response.json()).then(data => {
                        const button = form.querySelector('button');
                        if (data.following) {
                            button.classList.remove('btn-primary');
                            button.classList.add('btn-danger');
                            button.textContent = 'Deixar de Seguir';
                        } else {
                            button.classList.remove('btn-danger');
                            button.classList.add('btn-primary');
                            button.textContent = 'Seguir';
                        }
                        alert(data.message);
                    }).catch(error => {
                        alert('Erro ao seguir/deixar de seguir: ' + error);
                    });
                };
            });
        
            // Função para redirecionar para a página de detalhes do post
            function redirectToPost(postId) {
                window.location.href = `/post/${postId}`;
            }
        

    // Função para compartilhar o post
    function sharePost(postId) {
        // Gere a URL do post. Certifique-se de que essa URL corresponda à sua estrutura de URL.
        const postUrl = `http://vaibes.onrender.com/post/${postId}`; // Altere a URL conforme necessário
        const message = `Confira este post: ${postUrl}`;

        // Verifica se a API de compartilhamento está disponível
    if (navigator.share) {
            navigator.share({
                title: 'Post do Vaibes',
                text: message,
                url: postUrl
            })
            .then(() => {
                alert('Post compartilhado com sucesso!');
            })
            .catch(err => {
                alert('Falha ao compartilhar o post: ' + err);
            })
        } else {
            // Se a API de compartilhamento não estiver disponível, usa o método de copiar para a área de transferência
            navigator.clipboard.writeText(message).then(() => {
                alert("Link do post copiado para a área de transferência! Agora você pode compartilhar.");
            }).catch(err => {
                alert("Falha ao copiar o link: " + err);
            });
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
    const postDates = document.querySelectorAll('.post-date');
    
    postDates.forEach(postDate => {
        const timestamp = new Date(postDate.dataset.timestamp);
        const now = new Date();
        const timeDiff = now - timestamp; // diferença em milissegundos

        // Converte a diferença em segundos
        const seconds = Math.floor(timeDiff / 1000);
        let displayTime;

        if (seconds < 60) {
            displayTime = `${seconds} segundo${seconds !== 1 ? 's' : ''} atrás`;
        } else if (seconds < 3600) {
            const minutes = Math.floor(seconds / 60);
            displayTime = `${minutes} minuto${minutes !== 1 ? 's' : ''} atrás`;
        } else if (seconds < 86400) {
            const hours = Math.floor(seconds / 3600);
            displayTime = `${hours} hora${hours !== 1 ? 's' : ''} atrás`;
        } else {
            displayTime = postDate.textContent; // Exibe a data original se tiver mais de um dia
        }

        postDate.textContent = displayTime; // Atualiza o conteúdo do elemento
    });
});

    
    </script>
</body>
</html>
